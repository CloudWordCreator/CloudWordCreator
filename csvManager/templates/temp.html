<body>
    {% load custom_filters %}
    <div class="container">
        <h1 class="mt-5">データ表示 (Unit付き)</h1>
        <ul id="textList">
            {% for text in texts %}
                <li>
                    <input type="checkbox" class="text-checkbox" data-id="text-{{ text.id }}">
                    <button class="btn btn-link" onclick="toggleVisibility('text-{{ text.id }}')">{{ text.name }}</button>
                    <ul id="text-{{ text.id }}" class="nested">
                        {% for parent in units_by_text|get_item:text.id %}
                            <li>
                                <input type="checkbox" class="unit-checkbox" data-id="unit-{{ parent.id }}">
                                <button class="btn btn-link" onclick="toggleVisibility('unit-{{ parent.id }}')">{{ parent.name }}</button>
                                <ul id="unit-{{ parent.id }}" class="nested">
                                    {% for unit in parent.subunits.all %}
                                        <li>
                                            <input type="checkbox" class="unit-checkbox" data-id="unit-{{ unit.id }}">
                                            <button class="btn btn-link" onclick="toggleVisibility('unit-{{ unit.id }}')">{{ unit.name }}</button>
                                            <ul id="unit-{{ unit.id }}" class="nested">
                                                <table class="table table-bordered">
                                                    <thead>
                                                        <tr>
                                                            <th>No</th>
                                                            <th>英語</th>
                                                            <th>日本語</th>
                                                            <th>選択</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        {% for word in unit.words.all %}
                                                            <tr>
                                                                <td>{{ word.no }}</td>
                                                                <td>{{ word.english }}</td>
                                                                <td>{{ word.japanese }}</td>
                                                                <td><input type="checkbox" class="word-checkbox" data-id="word-{{ word.id }}"></td>
                                                            </tr>
                                                        {% endfor %}
                                                    </tbody>
                                                </table>
                                            </ul>
                                        </li>
                                    {% endfor %}
                                </ul>
                            </li>
                        {% endfor %}
                    </ul>
                </li>
            {% endfor %}
        </ul>
    </div>








    {% load custom_filters %}
    {% for text in texts %}
        <p>テキスト名 : {{ text.name }} ID : {{text.id}}</p>
        {% for parent in units_by_text|get_item:text.id %}
            <p>親ユニット : {{ parent.name }} ID : {{parent.id}}</p>
            {% for unit in parent.subunits.all %}
                <p>ユニット名 : {{ unit.name }}</p>
                <ul>
                    {% for word in unit.words.all %}
                        <li>単語 : {{ word.no }} - {{ word.english }} - {{ word.japanese }}</li>
                    {% endfor %}
                </ul>
            {% endfor %}
        {% endfor %}
    {% endfor %}